<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body class="menu-page">
    <!-- Blurry Loading -->
    <section class="bg">
        <canvas id="backgroundCanvas"></canvas>
        <canvas id="starsCanvas"></canvas>
        <canvas id="milkyWayCanvas"></canvas>
    </section>
    <div class="loading-text">0%</div>
    <!-- Scripts -->
    <script src="spaceBackground.js" id="spaceScript"></script>
    <script>
      const DELAY_MS = 1000;
      document.getElementById('spaceScript').addEventListener('load', function () {
        setTimeout(function () {
          var s = document.createElement('script');
          s.src = 'blurryLoading.js';
          document.body.appendChild(s);
        }, DELAY_MS);
      });
    </script>
    <script src="blurryLoading.js"></script>
            <a href="home.html">Hem</a>
        <a href="meny.html">Meny</a>
        <a href="kontakt.html">Kontakt</a>
    

    <section id="shop" class="section alt">
      <div class="container">
        <h2>cafe</h2>
        <p class="muted">Int√§kter g√•r till NASA.</p>
        <div class="grid products" role="list">
          <article class="card product" role="listitem">
            <img src="https://stevenyberg.com/wp-content/uploads/2014/04/bmb.jpg?w=650" alt="Fluffig bulle med chokladboll inuti" loading="lazy">
            <div class="p-16">
              <h3 class="product-title">Rymdbulle</h3>
              <p class="price" data-price="49">49 kr</p>
              <button class="btn add-to-cart" data-product='{"id":"bulle","name":"Rymdbulle","price":49}'>L√§gg i varukorg</button>
            </div>
          </article>

          <article class="card product" role="listitem">
            <img src="https://cdn-ildekep.nitrocdn.com/yClOYnTXyRTcVCRvaTNGDYmjCuCQTOtI/assets/images/optimized/rev-2971860/humboldtseedcompany.com/wp-content/uploads/2025/07/Cannabis-space-cake-recipe-1024x682.jpg" alt="Bomullskasse med gr√∂n logotyp" loading="lazy">
            <div class="p-16">
              <h3 class="product-title">Chokladkaka</h3>
              <p class="price" data-price="99">99 kr</p>
              <button class="btn add-to-cart" data-product='{"id":"kasse","name":"Chokladkaka","price":99}'>L√§gg i varukorg</button>
            </div>
          </article>

          <article class="card product" role="listitem">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTsfoLKiHZt-hh18GZlPHXLi4ySnARgWoC2hGpgBSc6DrCGqcEnGzNa-GTaUwMiMW53xzc&usqp=CAU" alt="Startkit med tre fr√∂p√•sar" loading="lazy">
            <div class="p-16">
              <h3 class="product-title">Rymdglass</h3>
              <p class="price" data-price="59">59 kr</p>
              <button class="btn add-to-cart" data-product='{"id":"glass","name":"rymdglass","price":59}'>L√§gg i varukorg</button>
            </div>

            
</article>
          </article>
        </div>
      </div>
    </section>
    
            <article class="card product" role="listitem">
            <img src="https://www.infernoonline.com/api/media/file/img_4-4.webp" alt="Startkit med tre fr√∂p√•sar" loading="lazy">
            <div class="p-16">
              <h3 class="product-title">Nattgib</h3>
              <p class="price" data-price="250">250kr</p>
              <button class="btn add-to-cart" data-product='{"id":"nattgib","name":"nattgib","price":250}'>L√§gg i varukorg</button>
            </div>
          </article>
        </div>
      </div>
    </section>

    <article class="card product" role="listitem">
            <img src="https://www.shutterstock.com/image-vector/1hours-icon-symbol-black-time-260nw-2184492657.jpg" alt="Startkit med tre fr√∂p√•sar" loading="lazy">
            <div class="p-16">
              <h3 class="product-title">1 timme</h3>
              <p class="price" data-price="59">59 kr</p>
              <button class="btn add-to-cart" data-product='{"id":"1 timme","n¬¥name":"1 timme","price":59}'>L√§gg i varukorg</button>
            </div>
          </article>
        </div>
      </div>
    </section>


    <article class="card product" role="listitem">
            <img src="https://www.shutterstock.com/image-illustration/10h-gold-3d-illustration-on-260nw-2655060087.jpg" alt="Startkit med tre fr√∂p√•sar" loading="lazy">
            <div class="p-16">
              <h3 class="product-title">10h</h3>
              <p class="price" data-price="259">259 kr</p>
              <button class="btn add-to-cart" data-product='{"id":"10h","name":"10h","price":259}'>L√§gg i varukorg</button>
            </div>
          </article>
        </div>
      </div>
    </section>


    <article class="card product" role="listitem">
            <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSnTOppGiZAMS8RlGCaF1y9LZjxIuHdyWAipQ&s" alt="Startkit med tre fr√∂p√•sar" loading="lazy">
            <div class="p-16">
              <h3 class="product-title">100h</h3>
              <p class="price" data-price="1290">1290 kr</p>
              <button onclick="" class="btn add-to-cart" data-product='{"id":"100h","name":"100h","price":1290}'>L√§gg i varukorg</button>
            </div>
          </article>
        </div>
      </div>
    </section>


    <aside id="cartPanel" class="cart-panel" aria-hidden="true" aria-labelledby="openCartBtn" tabindex="-1">
      <div class="cart-panel-inner">
        <h2>Din varukorg</h2>
        <div id="cartItems" class="cart-items" aria-live="polite"></div>
        <div class="cart-total">
          <span>Totalt:</span>
          <strong id="cartTotal">0 kr</strong>
        </div>
        <div class="cart-actions">
          <button id="checkoutBtn" class="btn primary">Till kassan (demo)</button>
          <button id="clearCartBtn" class="btn ghost">T√∂m</button>
          <button id="closeCartBtn" class="btn ghost">St√§ng</button>
        </div>
      </div>
    </aside>

    <section id="todo" class="section">
      <div class="container">
        <h2>√ñnskelista</h2>
        <form id="todoForm" class="todo-form" novalidate>
          <div class="field">
            <label for="todoInput">L√§gg till punkt</label>
            <input id="todoInput" name="todo" type="text" required minlength="2" placeholder="t.ex. L√§mna elskrot p√• √•tervinningen" aria-describedby="todoHelp">
            <p id="todoHelp" class="muted">Sparas lokalt i din webbl√§sare.</p>
          </div>
          <button class="btn secondary">L√§gg till</button>
        </form>

        <ul id="todoList" class="todo-list"></ul>
        <button id="clearTodosBtn" class="btn ghost">Rensa alla</button>
      </div>
    </section>




<script>
  // üõí Skapa en tom varukorg
  let cart = [];

  const cartItemsContainer = document.getElementById("cartItems");
  const cartTotalElement = document.getElementById("cartTotal");
  const clearCartBtn = document.getElementById("clearCartBtn");

  // ‚úÖ Ladda varukorg fr√•n localStorage n√§r sidan √∂ppnas
  document.addEventListener("DOMContentLoaded", () => {
    const storedCart = localStorage.getItem("cart");
    if (storedCart) {
      cart = JSON.parse(storedCart);
      updateCart();
    }
  });

  // ‚úÖ L√§gg till event p√• alla "L√§gg i varukorg"-knappar
  document.querySelectorAll(".add-to-cart").forEach(button => {
    button.addEventListener("click", () => {
      const product = JSON.parse(button.getAttribute("data-product"));
      addToCart(product);
    });
  });

  // ‚úÖ L√§gg till produkt i varukorgen och spara
  function addToCart(product) {
    const existingItem = cart.find(item => item.id === product.id);

    if (existingItem) {
      existingItem.quantity++;
    } else {
      product.quantity = 1;
      cart.push(product);
    }

    saveCart();
    updateCart();
  }

  // ‚úÖ Uppdatera varukorgens inneh√•ll i sidpanelen
  function updateCart() {
    cartItemsContainer.innerHTML = "";
    let total = 0;

    cart.forEach(item => {
      const itemTotal = item.price * item.quantity;
      total += itemTotal;

      const div = document.createElement("div");
      div.classList.add("cart-item");
      div.innerHTML = `
        <p>${item.name} x ${item.quantity} ‚Äì ${itemTotal} kr</p>
      `;
      cartItemsContainer.appendChild(div);
    });

    cartTotalElement.textContent = `${total} kr`;
  }

  // ‚úÖ Spara nuvarande varukorg i localStorage
  function saveCart() {
    localStorage.setItem("cart", JSON.stringify(cart));
  }

  // ‚úÖ T√∂m varukorgen helt
  clearCartBtn.addEventListener("click", () => {
    cart = [];
    localStorage.removeItem("cart");
    updateCart();
  });

  // ‚úÖ Demo: t√∂m varukorgen vid "Till kassan"
  document.getElementById("checkoutBtn").addEventListener("click", () => {
    alert("Tack f√∂r ditt k√∂p üöÄ");
    cart = [];
    localStorage.removeItem("cart");
    updateCart();
  });
</script>

    </section>

    <aside id="cartPanel" class="cart-panel" aria-hidden="true" aria-labelledby="openCartBtn" tabindex="-1">
      <div class="cart-panel-inner">
        <h2>Din varukorg</h2>
        <div id="cartItems" class="cart-items" aria-live="polite"></div>
        <div class="cart-total">
          <span>Totalt:</span>
          <strong id="cartTotal">0 kr</strong>
        </div>
        <div class="cart-actions">
          <button id="checkoutBtn" class="btn primary">Till kassan (demo)</button>
          <button id="clearCartBtn" class="btn ghost">T√∂m</button>
          <button id="closeCartBtn" class="btn ghost">St√§ng</button>
        </div>
      </div>
    </aside>

    <!-- ‚úÖ L√§gg in scriptet h√§r, innan </body> -->
    <script>
      // (klistra in hela skriptet h√§r)
    </script>

</body>
</html>